<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

{% extends 'core/base.html' %}

{% load django_bootstrap5 %}

{% block title %}
    Order Details
{% endblock %}

{% block content %}

<div id="DateHeader">
    <br />
    <h4>
        Current range: {{ start_month }} - {{ end_month }}.
    </h4>
</div>

<div id="OrdersByMonth">
    <div class="chart-container-rt2">
        <canvas id="orders-by-month"></canvas>
    </div>
</div>

<script>
    var ordersByMonthCtx = document.getElementById('orders-by-month')
    var ordersByMonthChart = new Chart(ordersByMonthCtx, {
        type: 'bar',
        options: {
            responsive: true,
            stacked: false,
            scales: {
                'Orders By Month': {
                    type: 'linear',
                    position: 'left',
                    display: true,
                },
                'Cost By Month': {
                    type: 'linear',
                    position: 'right',
                    display: true,
                    grid: {
                        drawOnChartArea: false,
                    },
                },
            }
        },
        data: {
            labels: JSON.parse('{{ orders_by_month_keys|safe }}'),
            datasets: [
                {
                    label: 'Orders By Month',
                    yAxisID: 'Orders By Month',
                    data: JSON.parse('{{ orders_by_month_values|safe }}'),
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Cost By Month',
                    yAxisID: 'Cost By Month',
                    data: JSON.parse('{{ cost_by_month_values|safe }}'),
                    backgroundColor: 'rgba(255, 104, 0, 0.5)',
                    borderColor: 'rgba(255, 104, 0, 0.5)',
                    borderWidth: 1
                }
            ]
        }
    });
</script>

{% endblock %}

